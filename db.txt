BEGIN;
CREATE TABLE "api_company" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(160) NOT NULL UNIQUE
)
;
CREATE TABLE "api_employee_permissions" (
    "id" serial NOT NULL PRIMARY KEY,
    "employee_id" integer NOT NULL,
    "permission_id" integer NOT NULL,
    UNIQUE ("employee_id", "permission_id")
)
;
CREATE TABLE "api_employee" (
    "id" serial NOT NULL PRIMARY KEY,
    "first_name" varchar(80) NOT NULL,
    "last_name" varchar(80) NOT NULL,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "eid" integer NOT NULL UNIQUE,
    "background_check" varchar(100),
    "last_training_date" date,
    UNIQUE ("first_name", "last_name", "company_id"),
    UNIQUE ("company_id", "eid")
)
;
ALTER TABLE "api_employee_permissions" ADD CONSTRAINT "employee_id_refs_id_2eeeef07" FOREIGN KEY ("employee_id") REFERENCES "api_employee" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE TABLE "api_contractor_permissions" (
    "id" serial NOT NULL PRIMARY KEY,
    "contractor_id" integer NOT NULL,
    "permission_id" integer NOT NULL,
    UNIQUE ("contractor_id", "permission_id")
)
;
CREATE TABLE "api_contractor" (
    "id" serial NOT NULL PRIMARY KEY,
    "first_name" varchar(80) NOT NULL,
    "last_name" varchar(80) NOT NULL,
    "email" varchar(75) NOT NULL,
    "employer" varchar(80) NOT NULL,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "background_check" varchar(100),
    "last_training_date" date,
    UNIQUE ("first_name", "last_name", "company_id")
)
;
ALTER TABLE "api_contractor_permissions" ADD CONSTRAINT "contractor_id_refs_id_eee92ef5" FOREIGN KEY ("contractor_id") REFERENCES "api_contractor" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE TABLE "api_permission" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(160) NOT NULL,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED
)
;
ALTER TABLE "api_employee_permissions" ADD CONSTRAINT "permission_id_refs_id_7483b74b" FOREIGN KEY ("permission_id") REFERENCES "api_permission" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "api_contractor_permissions" ADD CONSTRAINT "permission_id_refs_id_e2931cab" FOREIGN KEY ("permission_id") REFERENCES "api_permission" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE TABLE "api_log" (
    "id" serial NOT NULL PRIMARY KEY,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "category" varchar(160) NOT NULL,
    "author" varchar(160) NOT NULL,
    "accessor" varchar(160) NOT NULL,
    "description" text NOT NULL,
    "creation_time" timestamp with time zone NOT NULL
)
;
CREATE TABLE "api_employeerequest_permissions" (
    "id" serial NOT NULL PRIMARY KEY,
    "employeerequest_id" integer NOT NULL,
    "permission_id" integer NOT NULL REFERENCES "api_permission" ("id") DEFERRABLE INITIALLY DEFERRED,
    UNIQUE ("employeerequest_id", "permission_id")
)
;
CREATE TABLE "api_employeerequest" (
    "id" serial NOT NULL PRIMARY KEY,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "employee_id" integer NOT NULL REFERENCES "api_employee" ("id") DEFERRABLE INITIALLY DEFERRED,
    "hr_status" boolean,
    "tc_status" boolean,
    "ace_status" boolean,
    "cip_status" boolean
)
;
ALTER TABLE "api_employeerequest_permissions" ADD CONSTRAINT "employeerequest_id_refs_id_a3465550" FOREIGN KEY ("employeerequest_id") REFERENCES "api_employeerequest" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE TABLE "api_contractorrequest_permissions" (
    "id" serial NOT NULL PRIMARY KEY,
    "contractorrequest_id" integer NOT NULL,
    "permission_id" integer NOT NULL REFERENCES "api_permission" ("id") DEFERRABLE INITIALLY DEFERRED,
    UNIQUE ("contractorrequest_id", "permission_id")
)
;
CREATE TABLE "api_contractorrequest" (
    "id" serial NOT NULL PRIMARY KEY,
    "first_name" varchar(80) NOT NULL,
    "last_name" varchar(80) NOT NULL,
    "email" varchar(75) NOT NULL,
    "employer" varchar(80) NOT NULL,
    "company_id" integer NOT NULL REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "remote" boolean NOT NULL,
    "background_check" varchar(100),
    "hr_status" boolean,
    "tc_status" boolean,
    "ace_status" boolean,
    "cip_status" boolean
)
;
ALTER TABLE "api_contractorrequest_permissions" ADD CONSTRAINT "contractorrequest_id_refs_id_b8567e04" FOREIGN KEY ("contractorrequest_id") REFERENCES "api_contractorrequest" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "api_company_name_like" ON "api_company" ("name" varchar_pattern_ops);
CREATE INDEX "api_employee_permissions_employee_id" ON "api_employee_permissions" ("employee_id");
CREATE INDEX "api_employee_permissions_permission_id" ON "api_employee_permissions" ("permission_id");
CREATE INDEX "api_employee_company_id" ON "api_employee" ("company_id");
CREATE INDEX "api_contractor_permissions_contractor_id" ON "api_contractor_permissions" ("contractor_id");
CREATE INDEX "api_contractor_permissions_permission_id" ON "api_contractor_permissions" ("permission_id");
CREATE INDEX "api_contractor_company_id" ON "api_contractor" ("company_id");
CREATE INDEX "api_permission_company_id" ON "api_permission" ("company_id");
CREATE INDEX "api_log_company_id" ON "api_log" ("company_id");
CREATE INDEX "api_employeerequest_permissions_employeerequest_id" ON "api_employeerequest_permissions" ("employeerequest_id");
CREATE INDEX "api_employeerequest_permissions_permission_id" ON "api_employeerequest_permissions" ("permission_id");
CREATE INDEX "api_employeerequest_company_id" ON "api_employeerequest" ("company_id");
CREATE INDEX "api_employeerequest_employee_id" ON "api_employeerequest" ("employee_id");
CREATE INDEX "api_contractorrequest_permissions_contractorrequest_id" ON "api_contractorrequest_permissions" ("contractorrequest_id");
CREATE INDEX "api_contractorrequest_permissions_permission_id" ON "api_contractorrequest_permissions" ("permission_id");
CREATE INDEX "api_contractorrequest_company_id" ON "api_contractorrequest" ("company_id");

COMMIT;

BEGIN;
CREATE TABLE "authentication_user" (
    "id" serial NOT NULL PRIMARY KEY,
    "password" varchar(128) NOT NULL,
    "last_login" timestamp with time zone NOT NULL,
    "email" varchar(80) NOT NULL UNIQUE,
    "first_name" varchar(80),
    "last_name" varchar(80),
    "company_id" integer REFERENCES "api_company" ("id") DEFERRABLE INITIALLY DEFERRED,
    "title" varchar(80),
    "is_active" boolean NOT NULL,
    "is_admin" boolean NOT NULL
)
;
CREATE INDEX "authentication_user_email_like" ON "authentication_user" ("email" varchar_pattern_ops);
CREATE INDEX "authentication_user_company_id" ON "authentication_user" ("company_id");

COMMIT;

BEGIN;
CREATE TABLE "django_admin_log" (
    "id" serial NOT NULL PRIMARY KEY,
    "action_time" timestamp with time zone NOT NULL,
    "user_id" integer NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED,
    "content_type_id" integer REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED,
    "object_id" text,
    "object_repr" varchar(200) NOT NULL,
    "action_flag" smallint CHECK ("action_flag" >= 0) NOT NULL,
    "change_message" text NOT NULL
)
;
CREATE INDEX "django_admin_log_user_id" ON "django_admin_log" ("user_id");
CREATE INDEX "django_admin_log_content_type_id" ON "django_admin_log" ("content_type_id");

COMMIT;

BEGIN;
CREATE TABLE "auth_permission" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(50) NOT NULL,
    "content_type_id" integer NOT NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED,
    "codename" varchar(100) NOT NULL,
    UNIQUE ("content_type_id", "codename")
)
;
CREATE TABLE "auth_group_permissions" (
    "id" serial NOT NULL PRIMARY KEY,
    "group_id" integer NOT NULL,
    "permission_id" integer NOT NULL REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED,
    UNIQUE ("group_id", "permission_id")
)
;
CREATE TABLE "auth_group" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(80) NOT NULL UNIQUE
)
;
ALTER TABLE "auth_group_permissions" ADD CONSTRAINT "group_id_refs_id_f4b32aac" FOREIGN KEY ("group_id") REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "auth_permission_content_type_id" ON "auth_permission" ("content_type_id");
CREATE INDEX "auth_group_permissions_group_id" ON "auth_group_permissions" ("group_id");
CREATE INDEX "auth_group_permissions_permission_id" ON "auth_group_permissions" ("permission_id");
CREATE INDEX "auth_group_name_like" ON "auth_group" ("name" varchar_pattern_ops);

COMMIT;

BEGIN;
CREATE TABLE "django_content_type" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(100) NOT NULL,
    "app_label" varchar(100) NOT NULL,
    "model" varchar(100) NOT NULL,
    UNIQUE ("app_label", "model")
)
;

COMMIT;

BEGIN;
CREATE TABLE "django_session" (
    "session_key" varchar(40) NOT NULL PRIMARY KEY,
    "session_data" text NOT NULL,
    "expire_date" timestamp with time zone NOT NULL
)
;
CREATE INDEX "django_session_session_key_like" ON "django_session" ("session_key" varchar_pattern_ops);
CREATE INDEX "django_session_expire_date" ON "django_session" ("expire_date");

COMMIT;
